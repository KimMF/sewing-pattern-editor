<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  </head>
  <body>
    <script src="elm.js"></script>
    <script>
      var app = Elm.Main.init({
          flags: null
      });

      app.ports.safePattern.subscribe(function(pattern) {
          window.localStorage.setItem('pattern', JSON.stringify(pattern));
      });

      app.ports.requestPattern.subscribe(function() {
          var rawPattern = window.localStorage.getItem('pattern');
          if (rawPattern === null) {
              return;
          }

          var pattern = JSON.parse(rawPattern);
          if (pattern === undefined) {
              return;
          }

          if (app === undefined) {
              return;
          }
          app.ports.patternReceived.send(pattern);
      });
    </script>
  </body>
</html>
